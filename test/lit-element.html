<!doctype html>

<head>
  <meta charset="UTF-8">
  <title>vaadin-themable-mixin tests</title>
  <script src="../../../@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
  <script src="../../../wct-browser-legacy/browser.js"></script>
</head>

<body>

  <script type="module">
    import { ThemableMixin } from '../vaadin-themable-mixin.js';
    import { LitElement, html } from 'lit-element';
    import '@polymer/test-fixture/test-fixture.js';

    class TestFoo extends ThemableMixin(LitElement) {
      static get is() {
        return 'test-foo';
      }

      render() {
        return html`<div part="foo">foo</div>`
      }

    }
    customElements.define(TestFoo.is, TestFoo);
  </script>

  <div id="theme-modules">
    <dom-module id="test-foo-test-theme" theme-for="test-foo">
      <template>
        <style>
          [part="foo"] {
            color: rgb(255, 0, 0);
          }
        </style>
      </template>
    </dom-module>
  </div>

  <test-fixture id="default">
    <template>
      <test-foo></test-foo>
    </template>
  </test-fixture>

  <script type="module">
    describe('injecting style modules', () => {
      let component;

      beforeEach(done => {
        component = fixture('default');
        requestAnimationFrame(() => done());
      });

      it('should inject simple module', () => {
        expect(window.getComputedStyle(component.shadowRoot.querySelector('[part="foo"]')).color).to.equal('rgb(255, 0, 0)');
      });

    });
  </script>
</body>
